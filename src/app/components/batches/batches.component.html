<div class="container mt-16 mx-auto p-4 h-screen bg-[#e6f7e6]">
  <div>
    <div class="flex items-center justify-center bg-[#e6f7e6]">
      <div
        class="w-[80%] grid grid-flow-row md:grid-flow-row-2 lg:grid-flow-row-3 gap-4"
      >
        @for (item of batches; track $index) {
        <div
          class="bg-white p-4 rounded shadow-md flex flex-col justify-between items-start transition-all duration-300"
          [style.height]="isExpanded(item.batchID) ? '200px' : 'auto'"
        >
          <div class="flex justify-start items-start">
            <p class="px-6 font-bold text-black">BATCH {{ item.batchID }}</p>
            <p class="px-6">{{ item.title }}</p>
          </div>

          <div
            class="description"
            [style.display]="isExpanded(item.batchID) ? 'block' : 'none'"
          >
            <div class="flex ml-[116px]">
              <p></p>
              <p class="pl-6 font-bold text-black">Description:</p>
              <p class="mt-1 px-3">{{ item.description }}</p>
            </div>
          </div>

          <div class="flex justify-end w-full relative">
            <button
              (click)="toggleDescription(item.batchID)"
              class="text-gray-500 absolute bottom-3  {{
                isExpanded(item.batchID) ? 'bottom-36' : 'bottom-4'
              }}"
            >
              {{ isExpanded(item.batchID) ? "▲" : "▼" }}
            </button>
          </div>
        </div>
        }
      </div>
    </div>

    <div class="flex justify-end mt-4 mb-4 w-[80%] mx-auto">
      <button
        (click)="openAddBatchForm()"
        class="bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded"
      >
        ADD BATCH
      </button>
    </div>
  </div>

  <!-- Add Batch Form Modal -->
  @if(showAddBatchForm){
  <app-batch-form
    (formClosed)="closeAddBatchForm()"
    (batchAdded)="addBatch($event)"
  ></app-batch-form>
  }
</div>
